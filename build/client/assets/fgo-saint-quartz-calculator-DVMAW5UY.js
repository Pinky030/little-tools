import{r,j as e}from"./jsx-runtime-kxrMq5Cz.js";import{T as A,S as R,D as g,N as T,a as d,G as z,B,b as F,c as G,d as s,e as i}from"./DateInput-CzeZ13-3.js";import{S as N}from"./index-D2UphHAo.js";import{T as n}from"./Text-DhJSEID_.js";import"./polymorphic-factory-DCi5tn6z.js";import"./iconBase-B7Y1F10D.js";import"./index-B-NpjTTp.js";const q=21,E=30,K=()=>{const[c,p]=r.useState(null),[m,D]=r.useState(null),[h,k]=r.useState(0),[l,C]=r.useState({quartz:-1,fragment:-1,ticket:-1}),[f,b]=r.useState(!1),[x,y]=r.useState(!1),[j,S]=r.useState(!1),Y=(t,a)=>t*a,I=t=>BigInt(t)/BigInt(50)*BigInt(E),w=t=>{let a=0;if(c!==null)for(let o=0;o<t;o++){const u=(c.getDay()+o)%7+1;u===2||u===4?a+=1:u===6&&(a+=2)}return a},M=()=>{const t=i(m).diff(i(c),"day"),a=i(m).diff(i(c),"week"),o=f?w(t):0,u=j?Number(I(t)):0,v=x?Y(a,q):0;C({quartz:o+u+h,fragment:v,ticket:a})};return e.jsxs("form",{children:[e.jsx(A,{c:"blue",order:2,size:"h1",style:{fontFamily:"Greycliff CF, var(--mantine-font-family)"},fw:900,ta:"left",children:"聖晶石計算器"}),e.jsxs(R,{cols:{base:1,sm:2},mt:"xl",children:[e.jsx(g,{valueFormat:"YYYY/MM/DD",withAsterisk:!0,value:c,onChange:p,label:"開始日期",variant:"filled"}),e.jsx(g,{valueFormat:"YYYY/MM/DD",withAsterisk:!0,value:m,onChange:D,label:"完結日期",variant:"filled"})]}),e.jsx(T,{value:h,onChange:t=>{typeof t=="number"&&k(t)},label:"目前持有數:",mt:"md",name:"subject",variant:"filled"}),e.jsx(d,{checked:f,onChange:t=>b(t.currentTarget.checked),mt:"md",label:"每日簽到"}),e.jsx(d,{checked:x,onChange:t=>y(t.currentTarget.checked),mt:"md",label:"每週任務"}),e.jsx(d,{checked:j,onChange:t=>S(t.currentTarget.checked),mt:"md",label:"累積登入 (默認: 30聖晶石)"}),e.jsx(z,{justify:"center",mt:"xl",children:e.jsx(B,{onClick:()=>{M()},variant:"light",radius:"md",children:"確定"})}),(l.quartz>-1||l.fragment>-1||l.ticket>-1)&&e.jsxs(e.Fragment,{children:["   ",e.jsx(F,{my:"md"}),e.jsx(G,{color:"blue",icon:e.jsx(N,{}),mt:"xl",children:e.jsxs(s,{gutter:0,children:[e.jsx(s.Col,{span:2,children:e.jsx(n,{c:"dimmed",children:"日期:"})}),e.jsx(s.Col,{span:10,children:e.jsxs(n,{c:"blue",fw:500,children:[i(c).format("YYYY/MM/DD")," -"," ",i(m).format("YYYY/MM/DD")]})}),e.jsx(s.Col,{span:2,children:e.jsx(n,{c:"dimmed",children:"預期聖晶石收益:"})}),e.jsx(s.Col,{span:10,children:e.jsx(n,{c:"blue",fw:500,children:l.quartz})}),e.jsx(s.Col,{span:2,children:e.jsx(n,{c:"dimmed",children:"預期聖晶片收益:"})}),e.jsx(s.Col,{span:10,children:e.jsxs(n,{c:"blue",fw:500,children:[l.fragment," = ",l.fragment/7,"聖晶石"]})}),e.jsx(s.Col,{span:2,children:e.jsx(n,{c:"dimmed",children:"預期呼符收益:"})}),e.jsx(s.Col,{span:10,children:e.jsx(n,{c:"blue",fw:500,children:l.ticket})})]})})]})]})};export{K as default};
